## [커널](#커널-답변)

[생각](###생각)  
[정리](###정리)
---
###생각

#### 💡 Kernel(커널)이란?
- 운영체제에서 관리를 위해 꼭 필요한 영역
    - 커널은 `하드웨어와 응용 프로그램 사이에서 인터페이스`를 제공하며 응용프로그램이 하드웨어에서부터 오는 자원을 관리하고 사용할 수 있게 해주는 역할을 합니다
    
#### 💡 인터럽트가 필요한 이유 및 언제 발생되는지 말해주세요.
- CPU 와 I/O 의 속도차이를 극복하기 위해 인터럽트가 필요함(입출력 연산이 CPU 명령 수행속도보다 현저히 느리기 떄문)
- CPU가 프로그램을 실행하고 있을 때, 입출력 하드웨어 들의 장치나 예외상황이 발생하여 처리가 필요한 경우에 발생
 
#### 💡 인터럽트 종류는 무엇이 있으며 우선순위를 말해주세요.
- 하드웨어 인터럽트
  - 하드웨어에서 신호?를 발생시키면 인터럽트를 걸어 운영체제는 하던 일을 멈추고 하드웨어를 동작함
- 소프르웨어 인터럽트
    - write, read 등 소프트웨어에서 특정 명령어를 통해 인터럽트를 걸 수 있음( 시스템 콜, 트랩 )
- 내부 인터럽트
    - 소프트웨어에서 발생시키는 인터럽트로 주로 에러관련 ( 0으로 나누기 등 )

    - 외부, 내부, 소프트웨어 인터럽트 순으로 인터럽트 우선순위가 높다
    

#### 💡 인터럽트 동작 과정을 말해주세요.
- ?
    - CPU 가 프로그램을 실행
    - 인터럽트 요청이 들어옴
    - CPU 는 프로그램? 을 중단하고 다음 실행할 명령어와 현재 상태를 PCB 블록에 저장
    - ISR(Interrupt Service Routine)을 실행함
    - 인터럽트 종료 후 기존 상태를 복구
    - 프로그램을 계속 실행

#### 💡 시스템콜이란 무엇이며 시스템 콜을 사용하는 예시를 말해주세요.
- 소프트웨어에서 인터럽트를 발생시키는 명령어들
    - 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스
    - 사용자 모드에서 시스템 콜이나 라이브러리 함수를 통해 I/O 요청커널 모드로 전환 후 커널의 IO 관리자에 의해 장치 드라이버에 
    요청장치 드라이버에서 받은 값을 커널에 전달받은 값을 커널이 사용자에게 전달사용자 모드로 전환
    - 사용자 모드에서 malloc 함수를 이용하여 메모리 할당 요청 <- 시스템 콜 커널 모드로 전환 후 메모리 값을
    사용자에게 전달, 사용자 모드로 전환
    - `cp in.txt out.txt` 에서 in.txt 파일을 접근할 수 있는지 검사하기 위해 시스템 콜을 호출
    만약 파일이 존재하지 않는다면 에러발생, 종료할 때도 시스템 콜 사용
      
#### 💡 커널 모드와 유저 모드를 구분해 놓은 이유
- 하드웨어 접근은 큰 위험을 가진 에러들을 야기할 수 있기 때문에
쉽게 접근할 수 없도록 접근을 막기 위해
    - 시스템에 중요한 영향을 미치는 연산은 커널 모드에서만 실행 가능하도록 함으로써 하드웨어의 보안을 유지하기 위해

#### 💡 커널 수준 스레드와 사용자 수준 스레드의 각각 장단점?
- ?
    - 커널 수준 스레드는 커널이 직접 스레드를 제공해 주기 때문에 안정성과 다양한 기능 제공
    - 커널이 각 스레드를 개별적으로 관리
    - 단점은 유저 모드에서 커널 모드로 전환이 빈번하게 이뤄져 성능 저하
    - 사용자 수준 스레드는 커널 모드/ 우저모드 간 전환이 일어나지 않기 때문에 오버헤드 적다
    - 라이브러리 사용하기 때문에 이식성이 높고 유연한 스케줄링 가능
    - 반면 하나의 스레드가 블록되면 전체 프로세스가 블록됨


## [심화질문](#심화질문-답변)
#### 💡 부팅이란
- 컴퓨터를 실행할 때 부트로더가 운영체제를 메인 메모리에 올리는 과정
    - PC 에 전원이 들어온 후 운영체제가 실행되기 전까지의 과정
    - 리눅스 부팅
        - 전원공급
        - BIOS
            - ROM에 탑재된 BIOS가 키보드나 스크린의 부팅에 필요한 하드웨어의 각 장치들을 인식하고 초기화
        - 부트로더
        - 커널 로딩
        - init 프로세스
    
#### 💡 파일 시스템이란
- 파일을 저장하고 관리하는 시스템
    - 컴퓨터에서 파일을 쉽게 접근할 수 있도록 관리하는 체제
    
#### 💡 CISC(Complex)와 RISC(Reduced)의 차이
- ?
    - CISC는 연산에 처리되는 복잡한 명령어들을 탑재 => 전력소모 크고, 속도 느림
    - RISC는 하드웨어가 간단한 대신 명령어 조합 복잡하여 소프트웨어 복잡
    
#### 💡 RISC가 단순하고 빠른 구조인데 왜 CISC를 사용하나요?
- ?
    - 많은 프로세서가 CISC로 구축되어 있어 모두 RISC로 변경하기에는 많은 비용이 소모
    - 호환성이 높다

#### 💡 캐시와 레지스터의 차이점은 무엇인가요?
- 캐시는 메모리의 접근을 빠르게 하기 위한 임시 저장장치
- 레지스터는 계산을 하기 위한 저장장치
    - 캐시는 cpu와 별도로 있는 공간, 메인 메모리와 cpu 간의 속도 차이를 극복하기 위한 것
    - 레지스터는 cpu 안에서 연산을 처리하기 위하여 데이터를 저장하는 공간
    
#### 메모리 풀
- 필요한 메모리 공간과 개수만큼 메모리 풀을 만들어 놓고 필요할때마다 사용하고 반납하는 메모리 단편화 해결 기법

---
###정리
#### 커널
- 운영체제가 규모가 크기 때문에 모두 메모리에 올라가면 메모리 공간 낭비가 심하다
- 따라서 항상 필요한 부분만 메모리에 올려두는 즉 메모리에 상주하는 운영체제의 부분을 커널이라 함
배경
- 소프트웨어와 하드웨어의 인터페이스 역할
- 자원을 어떻게 효율적으로 관리할 것인가
    - 하드웨어 자원
        - CPU 스케쥴링
        - 메모리 관리
        - 주변 장치 및 입출력 장치
        
    - 소프트웨어 자원
    - 운용 기법

#### 인터럽트
배경
- `CPU와 하드웨어 사이 연산 시간 차이 속도를 극복하기 위해`??? 정확히 어떻게 극복하는거지

동작
- 인터럽트 요청
- 실행중이던 프로세스? 중단하고(cpu 계산?) 상태 저장
- 인터럽트 승인
- 인터럽트 단계 실행 하고
- 다시 원래 프로세스 재실행

#### 시스템 콜
배경
- 운영체제는 커널모드와 사용자모드 (파일 읽어 오기, 쓰기, 화면에 메시지 출력 등)
- 이러한 커널 영역의 기능을 사용자모드가 사용 가능하게, 즉 프로세스가 하드웨어에 직접 접근해서 필요한 기능을사용할 수 있게

동작
- 매개변수를 CPU 레지스터 내에 전달 | 이경우 매개변수가 cpu 레지스터 보다 많을 수 있음
- 위 경우 매개변수를 메모리에 저장하고 메모리 주소가 레지스터에 전달됨
- 매개변수는 프로그램에 의해 스택으로 전달

유형
- 프로세스 제어
    - 끝내기, 중지 프로세스 생성, 시간 대기, 메모리 할당, 해제등등
- 파일 조작
    - 파일 생성 , 읽기, 쓰기
- 장치 관리
    - 장치를 요구 방출
- 정보 유지
    - 시간 날짜 설정 획득
- 통신
    - 통신 연결의 생성 제거
    - 메시지 송수신

#### [커널 수준 스레드 & 사용자 수준 스레드](https://helloinyong.tistory.com/293)
- 커널 수준 스레드
    - CPU 에서 인터럽트 발생으로 현재 작업 중인 프로세스가 Block 되고 다른 프로세스로 변경할때
     CPU 재배치 레지스터에 다음에 실행할 프로세스 정보들로 교체를 하고 캐시를 비움 = `컨텍스트 스위칭`
    - 이럴때마다 CPU 가 일을 못하는데 커널이 직접 스레드를 관리하므로 특정 스레드가 Block 되어도 다른 스레드들은 독립적으로 일함

- 유저 수준 스레드
    - 전부 커널 내부에 있는 스레드이지만 커널의 통제권 안에 있지는 않은 스레드
    - 해당 프로세스에 대한 사용자 입출력을 받을 수 있도록 하는 작은 커널 통제권 밖의 작은 스레드일뿐
    - `다시보기`
# Network 04. LoadBalancing

## 00. LoadBalancing

- ### 개념

  서버를 여러 대 사용하는 복합 구성체일 때 각 서버에 부하를 분산하는 기술이다. 하드웨어의 성능을 높이는 Scale-up 방식에 비해 Scale-out 방식은 비용 면에서 유리하다.

  보통 L4(4계층) 로드 밸런싱과 L7 로드 밸런싱을 사용한다.

## 01. L4 LoadBalancing

    L4 로드밸런서는 네트워크 계층이나 전송 계층의 정보를 바탕으로 로드를 분산한다. IP주소나 포트번호, MAC, 전송 프로토콜에 따라 트래픽을 나누는 것이 가능하다.

- ### 장점

  1. 데이터를 보지않고 패킷 레벨에서 로드를 분산하기 때문에 빠르고 효율적이다.
  2. 데이터의 내용을 복호화하지 않는다.
  3. L7에 비해 가격이 저렴하다.

- ### 단점
  1. 섬세한 라우팅이 불가능하다.
  2. 사용자의 IP가 수시로 바뀐다면 제공이 어렵다.

## 02. L7 LoadBalancing

    L7 로드밸런서는 애플리케이션 계층에서 로드를 분산한다. HTTP 헤더, 쿠키 등 사용자의 요청을 기준으로 특정 서버에 트래픽을 분산할 수 있다.

    패킷의 내용을 보고 서버에 분산할 수 있기 때문에 클라이언트의 요청을 세분화하여 서버에 전달할 수 있다는 장점이 있다.

- ### 장점

  1. 섬세한 라우팅이 가능하다.
  2. 캐싱 기능을 제공한다.
  3. 비정상적인 트래픽을 사전에 필터링할 수 있다.

- ### 단점
  1. 패킷 내용 복호화에 비용이 든다.
  2. 클라이언트와 로드밸런서 간의 인증서를 공유하기 때문에 공격자의 공격 위험이 존재한다.

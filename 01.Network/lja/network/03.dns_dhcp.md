# Network 03. DNS, DHCP

## 00. DNS

- ### 개념
  특정 호스트와 네트워크 통신을 하기 위해서는 해당 호스트의 IP주소를 알아야한다. 하지만 사람이 숫자 형태의 주소를 기억하기는 어렵기때문에 일반적으로는 대명사를 대신 사용한다. 이 대명사를 IP주소로 반환해주는 서버를 Domain Name Server라고 하고 이러한 체계를 DNS라고 한다.

---

<br />

## 01. Domain Name Structure

- ### 개념

  도메인 이름은 .을 통해 레벨이 구분된다. 각 레벨에 따라 DNS 서버들이 따로 존재하여 각 서버에 주소를 물어보는 형식이다.

  blog(Sub).ex(Second-level).com(Top-level).(Root)

  로컬에서 example.com 주소로 접근할 때 다음과 같은 과정이 발생한다.

  1. DNS 서버가 루트 네임서버에 com의 주소를 물어봄
  2. DNS 서버가 com의 네임서버에 example.com의 네임서버 주소를 물어봄
  3. DNS 서버가 example.com의 네임서버에 example.com의 주소를 물어봄.
  4. DNS 서버가 example.com의 주소를 로컬 사용자에게 알려줌.
  5. 사용자가 DNS 서버로부터 받은 주소로 접근

  도메인과 매칭되는 정확한 IP는 Sub DNS 서버만 알고있다.

---

<br />

## 03. Round-Robin DNS

- ### 개념

  일반적인 지식과는 다르게 몇몇 서비스는 도메인에 여러 개의 공인 IP 주소를 가질 수 있다.

  사용자가 도메인에 접속하는 순간 DNS에서 여러 개 중 하나의 IP 주소로 접근하게 된다. 이러한 방식을 통해 각 서버에 부하를 배분할 수 있다.

  하지만 로드 밸런싱 전용 소프트웨어나 하드웨어와 달리 Health check 대안 기능이 없고, DNS는 IP 값에 대해 캐싱을 하기 때문에 완벽한 로드 밸런싱은 아니라고 할 수 있다.

---

<br />

## 04. DHCP

- ### 개념

  DHCP는 네트워크에 사용될 IP주소와 각종 프로토콜에 대한 기본 설정을 클라이언트에게 자동으로 제공해주는 프로토콜이다.

        예를 들면 가정집에서 사용하는 공유기가 있다. 공유기는 동적구성의 IP 환경이다.

- ### 작동 원리

  1. DHCP discover

     클라이언트(PC, 노트북)은 DHCP 서버의 주소를 알기 위해 서브넷에 DHCP 서버를 찾는 메시지를 보낸다.

  2. DHCP Offer

     discover 메시지를 받은 DHCP 서버는 자신의 IP 주소를 알려주고 클라이언트가 사용할 IP 주소 및 임대시간 등을 알려준다. 이 때 클라이언트의 IP 주소는 아직 없기 때문에 해당 정보를 여기저기 뿌린다.

  3. DHCP request

     클라이언트는 응답을 받고 자신에게 가장 최적의 서버를 선택하여 해당 정보를 사용한다고 메시지를 보낸다.

  4. DHCP ack

     DHCP 서버는 사용을 확정하는 의미에서 ACK 메시지를 클라이언트에게 보낸다.

---

<br />

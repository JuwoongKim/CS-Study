# Network 08.Cookie, Session

## 00. Cookie

- ### 개념

  HTTP는 connectionless, statless한 프로토콜이다. 그렇기 때문에 서버는 클라이언트가 누구인지 매번 확인해야 한다는 단점이 있다.

  쿠키와 세선은 이러한 HTTP의 특성을 보완하기 위애 고안된 방식이다.

  쿠키는 클라이언트 로컬에 저장되는 키-값 형태의 파일이다.

- ### 동작방식

  1. 클라이언트가 페이지를 요청
  2. 서버에서 쿠키 생성
  3. HTTP 헤더에 쿠키를 포함시켜 응답(브라우저가 자동처리)
  4. 브라우저가 종료되어도 쿠키의 만료 기간까지 클라이언트에서 보관
  5. 같은 요청일 경우 HTTP 헤더에 쿠키를 함께 보냄
  6. 서버에서 쿠키를 읽어 업데이트 혹은 유지

- ### 예시

  아이디 비밀번호 저장

  쇼핑몰 장바구니

  자동 로그인, 팝업 오늘은 안 보기

---

<br />

## 01. 세션

- ### 개념

  세션은 쿠키와 유사한 기능을 한다. 하지만 쿠키가 클라이언트 단에서 저장되는 것과 다르게 세션은 서버에 저장된다. 그렇기 때문에 보안적으로는 좋지만 서버에 비용이 생긴다는 단점이 있다.

  클라이언트가 request를 보낼 때 서버의 엔진은 클라이언트에게 유일한 id를 부여하는 데 이것이 세션 id 이다.

- ### 동작 방식
  1. 클라이언트가 서버에 접속 시 서버로부터 생성된 ID를 발급받음
  2. 클라이언트는 세션 ID를 쿠키를 사용해 저장
  3. 클라이언트가 서버에 요청 시 쿠키의 세션 ID를 같이 전달
  4. 서버는 세션 ID로 클라이언트의 정보를 가져와 사용
  5. 클라이언트의 정보를 가지고 요청을 처리 후 응답
  6. 브라우저 종료 시 인증상태 해제

---

<br />

## 02. 토큰

- ### 개념

  세션과 마찬가지로 서버에서 토큰을 생성하여 클라이언트에게 전달해주는 방식이다. 클라이언트는 로컬에 토큰을 저장하고 요청 시 함께 토큰을 보낸다. 해당 토큰은 서버의 secret 키를 이용해 복호화한다.

  토큰 자체에 정보가 사용자 정보가 들어있기 때문에 길이가 늘어나면 네트워크 부하가 생긴다.

  토큰의 payload 부분에 중요한 정보를 담으면 안 된다.

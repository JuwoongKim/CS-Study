# NetWork 00. OSI 7 Layer, TCP/IP 4 Layer

## 00. Protocol

- ### 개념
  서로 다른 기기 간 통신을 위한 규약, 합의된 프로토콜을 정해서 오류 발생 여부 또는 패킷의 누락 여부 등을 파악할 수 있다.

<br/>

- ### 흐름제어
  흐름제어는 호스트와 호스트 사이에서 사용되는 방법이다. 송신자와 수신자 간의 통신을 가정할 때, 수신자의 속도보다 송신자의 전송 속도가 더 빠르면 버퍼에 overflow가 발생할 수 있다. 이 때 패킷의 누락이 발생할 수 있는데 흐름제어는 이것을 방지하기 위해 사용된다.

<br/>

- ### 혼잡제어
  혼잡제어는 흐름제어와 유사한 용도로 쓰인다. 하지만 흐름제어와 달리 방법의 주체에 네트워크가 포함된다.

<br/>

- ### 오류제어
  패킷에 생긴 오류를 검출하기 위해 사용되는 방법이다. 패리티 비트, CRC 등의 방법들이 존재한다.

---

<br/>

## 01. OSI 7계층

- ### 개념

  국제 표준기관에서 데이터 통신을 7단계로 정의한 모델이다. 각각의 계층에서 독립적인 역할을 수행하며, 문제 발생 시 손쉽게 파악할 수 있다.

- ### 1계층(Physical Layer)

  데이터 단위는 비트이다. 1계층은 전기적 신호를 이용하여 데이터를 전달한다.

- ### 2계층 (Data Link Layer)

  인접 장비에 접근하기 위한 MAC 주소, 네트워크 환경 정보등이 2계층 데이터 단위인 프레임에 기록된다. 충돌을 방지하기 위해 CSMA/CD 방식을 사용할 수 있다. 오류제어를 제공하며 P2P 신뢰성을 제공한다.

- ### 3계층 (Network Layer)

  네트워크 간 가장 효율적인 경로를 탐지하는 라우팅을 수행하는 계층이다. 데이터 단위는 패킷이다.

- ### 4계층 (Transport Layer)

  TCP 또는 UDP를 사용한다. TCP는 신뢰성을 제공해주지만 그에 따라서 UDP보다 비용이 크다. 데이터 단위인 Segment에 기록된 port number를 보고 각각의 서비스에 맞게 데이터를 제공한다.

- ### 5계층 (Session Layer)

  5계층부터 데이터의 단위는 Data 또는 Message이다. 5계층은 응용프로그램 사이의 통신을 담당한다.

- ### 6계층 (Presentation Layer)

  6계층은 데이터를 표현하는 방식을 결정한다. 암호화된 데이터를 해독하거나 데이터를 압축하는 기능 등을 수행한다.

- ### 7계층 (Application Layer)
  사용자 인터페이스를 제공하는 계층이다. HTTP 등의 프로토콜이 7계층에 속한다. 응용 프로세스와 같이 일반적인 응용 서비스를 수행한다.

---

<br />

## TCP/IP 프로토콜

- ### 개념
  현재 인터넷들이 사용하는 통신 규약의 모음이다. 개념적 모델인 OSI 7계층과 다르게 실제로 사용되는 규칙이다.

<p align="center"><img src="https://www.ibm.com/docs/ko/ssw_aix_71/network/figures/comma28.jpg"></p>

다음과 같이 송신자 수준에서 데이터 전송이 발생한다.

응용 계층에서 보내진 데이터는 전송계층 UDP 또는 TCP 프로토콜에 따라 대상 주소를 추가 후 패킷 단위로 데이터를 쪼갠다.

그 후 네트워크 계층은 패킷을 IP 데이터그램에 추가하고 전송위치를 결정한다.

마지막으로 네트워크 인터페이스 계층은 IP 데이터그램을 승인하고 이더넷이나 토큰 링 구조에서 프레임으로 전송한다.

---

<br />

## 캡슐화, 역캡슐화

- ### 개념

  데이터가 계층을 이동하면서 데이터 패킷에는 각 계층에 따른 헤더가 붙는다.

  전송 계층에서는 포트 번호, Sequence Number, Acknowledgemet Number 등의 정보를 헤더에 담고, 이후 네트워크 계층은 IP 프로토콜 정보, 데이터 링크 계층은 MAC 주소 등이 담긴 이더넷 헤더와 트레일러(데이터 전송 도중 오류를 확인하는 역할)를 붙인다.

  역캡슐화는 이와 반대로 수신 측에서 하위 헤더를 제거하면서 상위 계층으로 패킷이 전달되는 과정이다.

---

<br />

## IP(Internet Protocol)

- ### 개념

  네트워크 계층에서 사용되는 프로토콜이다. 데이터 패킷이 네트워크를 통해 이동하는 방법을 설명하고, 라우팅하는 방식 등을 표준화한다.

  IP는 신뢰성을 보장하지 않기 때문에(데이터가 성공적으로 전달되었는지 확인 X) 상위 계층에서 신뢰성을 제공해야 한다.

- ### IP 주소
  네트워크 상의 기기를 식별하기 위한 번호이다. 이 번호를 사람이 외우기란 쉽지 않기 때문에 이해하기 쉬운 도메인 이름을 대신 사용하며, 도메인 이름을 네트워크 주소로 바꿔주는 DNS가 있다.
